---
layout: none
collection: product
permalink: /academic/product_01
date: 2022-04-31
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>自习室预约小程序｜作品集案例</title>
<meta name="description" content="从模糊需求到上线：选座→支付→取消/退款→异常兜底；含泳道图、原型图、前端交互模拟。">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<!-- Mermaid for diagrams -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>mermaid.initialize({ startOnLoad: true, securityLevel: 'loose' });</script>

<style>
  :root{
    --bg: #fafbfc;
    --card: #ffffff;
    --card-hover: #f8fafc;
    --muted: #64748b;
    --text: #1e293b;
    --text-secondary: #475569;
    --brand: #3b82f6;
    --brand-light: #60a5fa;
    --accent: #10b981;
    --accent-light: #34d399;
    --border: #e2e8f0;
    --border-light: #f1f5f9;
    --shadow: rgba(0, 0, 0, 0.05);
    --shadow-lg: rgba(0, 0, 0, 0.1);
    --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    --gradient-secondary: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
    --gradient-accent: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
    --gradient-bg: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Arial, sans-serif;
    background: var(--gradient-bg);
    background-attachment: fixed;
    color: var(--text);
    line-height: 1.6;
    overflow-x: hidden;
  }
  
  a {
    color: inherit;
    text-decoration: none;
  }
  
  /* 返回按钮 */
  .back-button {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
  }
  
  .back-link {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 12px 20px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 4px 12px var(--shadow);
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }
  
  .back-link:hover {
    background: rgba(255, 255, 255, 1);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px var(--shadow-lg);
  }
  
  .back-icon {
    font-size: 16px;
    font-weight: bold;
  }
  
  .wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px 100px;
    position: relative;
  }
  
  /* 背景装饰 */
  .wrap::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.03) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
  }
  
  /* Hero Section */
  header.hero {
    display: grid;
    gap: 32px;
    grid-template-columns: 1.5fr 1fr;
    align-items: center;
    padding: 40px;
    border: 1px solid var(--border);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.8) 100%);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    box-shadow: 0 20px 40px var(--shadow-lg);
    position: relative;
    overflow: hidden;
  }
  
  .hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--gradient-primary);
    opacity: 0.03;
    z-index: -1;
  }
  
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    padding: 8px 16px;
    border-radius: 20px;
    margin-bottom: 20px;
    font-size: 14px;
    font-weight: 500;
    color: var(--brand);
  }
  
  .badge-icon {
    font-size: 16px;
  }
  
  .hero h1 {
    margin: 0;
    font-size: 36px;
    font-weight: 700;
    letter-spacing: -0.5px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
  }
  
  .hero p {
    margin: 16px 0 0;
    color: var(--text-secondary);
    font-size: 18px;
    line-height: 1.6;
  }
  
  .tags {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 20px;
  }
  
  .tag {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    color: var(--brand);
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s ease;
  }
  
  .tag:hover {
    background: rgba(59, 130, 246, 0.2);
    transform: translateY(-2px);
  }
  
  .hero-actions {
    display: flex;
    gap: 16px;
    margin-top: 24px;
  }
  
  .btn-primary {
    background: var(--gradient-primary);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
  }
  
  .btn-secondary {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 12px 24px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .btn-secondary:hover {
    background: rgba(255, 255, 255, 1);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px var(--shadow);
  }
  
  .btn-icon {
    font-size: 18px;
  }
  
  .kpis {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }
  
  .kpi {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid var(--border);
    padding: 24px 20px;
    border-radius: 16px;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .kpi::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--gradient-accent);
  }
  
  .kpi:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px var(--shadow);
  }
  
  .kpi-icon {
    font-size: 24px;
    margin-bottom: 12px;
  }
  
  .kpi-label {
    font-size: 14px;
    color: var(--muted);
    margin-bottom: 8px;
  }
  
  .kpi strong {
    font-size: 24px;
    font-weight: 700;
    color: var(--accent-light);
  }
  
  /* Cards */
  .card {
    margin-top: 32px;
    padding: 32px;
    border: 1px solid var(--border);
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    box-shadow: 0 10px 30px var(--shadow);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--gradient-primary);
    opacity: 0.5;
  }
  
  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 40px var(--shadow-lg);
  }
  
  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }
  
  .card h2 {
    margin: 0;
    font-size: 24px;
    font-weight: 600;
    color: var(--text);
  }
  
  .card-badge {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.2);
    color: var(--accent-light);
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
  }
  
  .info-section {
    background: rgba(248, 250, 252, 0.8);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
  }
  
  .section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    margin: 0 0 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }
  
  /* 故事内容样式 */
  .story-section {
    margin-bottom: 32px;
  }
  
  .story-content {
    background: rgba(248, 250, 252, 0.8);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
  }
  
  .team-info {
    background: rgba(59, 130, 246, 0.05);
    border: 1px solid rgba(59, 130, 246, 0.1);
    border-radius: 8px;
    padding: 16px;
    margin-top: 16px;
  }
  
  .team-info h4 {
    color: var(--brand);
    margin: 0 0 8px;
    font-size: 16px;
  }
  
  /* 需求框样式 */
  .requirement-box {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin: 16px 0;
    box-shadow: 0 4px 12px var(--shadow);
  }
  
  .requirement-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
  }
  
  .requirement-header h4 {
    margin: 0;
    color: var(--text);
    font-size: 18px;
  }
  
  .platform-tag {
    background: var(--gradient-primary);
    color: white;
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 500;
  }
  
  .requirement-list h5 {
    color: var(--text);
    margin: 16px 0 8px;
    font-size: 16px;
  }
  
  .requirement-list ul {
    margin: 0;
    padding-left: 20px;
  }
  
  .requirement-list li {
    margin-bottom: 8px;
    line-height: 1.6;
  }
  
  .requirement-note {
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.2);
    border-radius: 8px;
    padding: 12px;
    margin-top: 16px;
  }
  
  .requirement-note p {
    margin: 0;
    color: var(--text-secondary);
    font-style: italic;
  }
  
  /* 时间线样式 */
  .communication-timeline {
    position: relative;
    padding-left: 20px;
  }
  
  .communication-timeline::before {
    content: '';
    position: absolute;
    left: 20px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--gradient-primary);
  }
  
  .timeline-item {
    position: relative;
    margin-bottom: 32px;
  }
  
  .timeline-marker {
    position: absolute;
    left: -28px;
    top: 8px;
    width: 24px;
    height: 24px;
    background: var(--brand);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    z-index: 1;
  }
  
  .timeline-content {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 12px var(--shadow);
  }
  
  .timeline-content h4 {
    margin: 0 0 12px;
    color: var(--text);
    font-size: 16px;
  }
  
  .timeline-details ul {
    margin: 8px 0;
    padding-left: 20px;
  }
  
  .timeline-details li {
    margin-bottom: 6px;
    line-height: 1.5;
  }
  
  .timeline-note {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 8px;
    padding: 12px;
    margin-top: 12px;
  }
  
  .timeline-note p {
    margin: 0;
    color: var(--text);
  }
  
  /* 技术方案网格 */
  .tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  
  .tech-item {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px var(--shadow);
  }
  
  .tech-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px var(--shadow-lg);
  }
  
  .tech-icon {
    font-size: 32px;
    margin-bottom: 12px;
  }
  
  .tech-item h4 {
    margin: 0 0 8px;
    color: var(--text);
    font-size: 16px;
  }
  
  .tech-item p {
    margin: 0;
    color: var(--text-secondary);
    font-size: 14px;
    line-height: 1.5;
  }
  
  /* 项目成果 */
  .results-summary {
    background: rgba(248, 250, 252, 0.8);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
  }
  
  .results-summary p {
    margin: 0 0 20px;
    line-height: 1.6;
  }
  
  .key-achievements {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
  }
  
  .achievement-item {
    text-align: center;
    padding: 16px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 8px;
  }
  
  .achievement-number {
    display: block;
    font-size: 20px;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 4px;
  }
  
  .achievement-label {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
  }

  /* 结果与收获部分样式 */
  .metrics-section {
    margin: 32px 0;
  }
  
  .metrics-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 24px;
    text-align: center;
  }
  
  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
  }
  
  .metric-card {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .metric-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--gradient-primary);
  }
  
  .metric-card.primary::before {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .metric-card.success::before {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }
  
  .metric-card.info::before {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  }
  
  .metric-card.warning::before {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
  }
  
  .metric-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  }
  
  .metric-icon {
    font-size: 32px;
    margin-bottom: 16px;
  }
  
  .metric-content {
    text-align: center;
  }
  
  .metric-number {
    font-size: 28px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 8px;
    display: block;
  }
  
  .metric-label {
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 8px;
    display: block;
  }
  
  .metric-desc {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.4;
  }
  
  .achievements-section {
    margin: 40px 0;
  }
  
  .achievements-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 24px;
    text-align: center;
  }
  
  .achievements-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
  }
  
  .achievement-card {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    transition: all 0.3s ease;
  }
  
  .achievement-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px var(--shadow);
  }
  
  .achievement-icon {
    font-size: 32px;
    margin-bottom: 16px;
    display: block;
  }
  
  .achievement-card h4 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 16px;
  }
  
  .achievement-card ul {
    margin: 0;
    padding-left: 20px;
  }
  
  .achievement-card li {
    margin-bottom: 8px;
    line-height: 1.6;
    color: var(--text-secondary);
  }
  
  .growth-section {
    margin: 40px 0;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 16px;
    padding: 32px;
  }
  
  .growth-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 24px;
    text-align: center;
  }
  
  .growth-content {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }
  
  .growth-item {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
  }
  
  .growth-item:hover {
    transform: translateX(8px);
    box-shadow: 0 8px 25px var(--shadow);
  }
  
  .growth-icon {
    font-size: 32px;
    flex-shrink: 0;
  }
  
  .growth-text h4 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 12px;
  }
  
  .growth-text p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
  }
  
  .future-section {
    margin: 40px 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    border-radius: 16px;
    padding: 32px;
  }
  
  .future-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 24px;
    text-align: center;
  }
  
  .future-content {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }
  
  .future-item {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    text-align: center;
    transition: all 0.3s ease;
  }
  
  .future-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  }
  
  .future-icon {
    font-size: 32px;
    margin-bottom: 16px;
    display: block;
  }
  
  .future-text h4 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 12px;
  }
  
  .future-text p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
  }
  
  .results-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
    margin-top: 20px;
  }
  
  .result-item {
    background: rgba(248, 250, 252, 0.8);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .result-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--gradient-accent);
  }
  
  .result-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px var(--shadow);
  }
  
  .result-icon {
    font-size: 32px;
    margin-bottom: 16px;
  }
  
  .result-item h3 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    margin: 0 0 12px;
  }
  
  .result-item p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
  }
  
  .cols {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
  }
  
  .list {
    margin: 0;
    padding-left: 20px;
    color: var(--text-secondary);
    line-height: 1.7;
  }
  
  .list li {
    margin-bottom: 12px;
  }
  
  .muted {
    color: var(--muted);
    font-size: 16px;
    line-height: 1.6;
  }
  
  /* 流程切换标签 */
  .flow-tabs {
    display: flex;
    gap: 8px;
    margin: 20px 0;
    padding: 4px;
    background: rgba(248, 250, 252, 0.8);
    border-radius: 12px;
    border: 1px solid var(--border);
  }
  
  .flow-tab {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    border: none;
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
  }
  
  .flow-tab:hover {
    background: rgba(59, 130, 246, 0.1);
    color: var(--brand);
  }
  
  .flow-tab.active {
    background: var(--brand);
    color: white;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
  }
  
  .tab-icon {
    font-size: 16px;
  }
  
  .tab-text {
    font-weight: 500;
  }
  
  /* 流程内容 */
  .flow-content {
    display: none;
    animation: fadeIn 0.3s ease-in-out;
  }
  
  .flow-content.active {
    display: block;
  }
  
  .flow-content h3 {
    font-size: 20px;
    font-weight: 600;
    color: var(--text);
    margin: 0 0 8px;
  }
  
  .flow-description {
    color: var(--muted);
    font-size: 14px;
    margin-bottom: 20px;
    line-height: 1.5;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Gallery - 小红书风格瀑布流 */
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  
  .gallery figure {
    margin: 0;
    border: 1px solid var(--border);
    background: var(--card);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    flex-direction: column;
  }
  
  .gallery figure:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px var(--shadow);
  }
  
  .gallery img {
    display: block;
    width: 100%;
    height: auto;
    object-fit: contain;
    object-position: center;
    transition: transform 0.3s ease;
    background: #f8fafc;
    max-width: 100%;
    min-height: 200px;
  }
  
  .gallery figure:hover img {
    transform: scale(1.02);
  }
  
  .gallery figcaption {
    padding: 16px;
    font-size: 14px;
    color: var(--text-secondary);
    border-top: 1px solid var(--border);
    font-weight: 500;
    line-height: 1.4;
    background: var(--card);
  }
  
  /* 响应式调整 */
  @media (max-width: 1024px) {
    .gallery {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }
  }
  
  @media (max-width: 768px) {
    .gallery {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }
  }
  
  @media (max-width: 480px) {
    .gallery {
      grid-template-columns: 1fr;
      gap: 12px;
    }
  }
  
  /* Mermaid */
  .mermaid {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px;
    margin-top: 20px;
    overflow-x: auto;
  }
  
  .flow-diagram-container {
    margin-top: 20px;
  }
  
  /* 流程图占位符 */
  .flow-placeholder {
    margin-top: 20px;
    border: 2px dashed var(--border);
    border-radius: 16px;
    padding: 40px;
    text-align: center;
    background: rgba(248, 250, 252, 0.5);
    transition: all 0.3s ease;
  }
  
  .flow-placeholder:hover {
    border-color: var(--brand);
    background: rgba(59, 130, 246, 0.05);
  }
  
  .placeholder-content {
    max-width: 400px;
    margin: 0 auto;
  }
  
  .placeholder-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.6;
  }
  
  .placeholder-content h3 {
    font-size: 20px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 8px;
  }
  
  .placeholder-content p {
    color: var(--muted);
    margin-bottom: 24px;
    line-height: 1.6;
  }
  
  .placeholder-actions {
    display: flex;
    justify-content: center;
    gap: 12px;
  }
  
  /* Demo Shell */
  .demo-shell {
    margin-top: 20px;
    border: 1px solid var(--border);
    border-radius: 20px;
    background: var(--card);
    padding: 24px;
    box-shadow: 0 10px 30px var(--shadow);
  }
  
  .demo-head {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  
  .demo-title {
    font-weight: 600;
    font-size: 18px;
    color: var(--text);
  }
  
  .demo-actions {
    display: flex;
    gap: 12px;
  }
  
  .btn {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    color: var(--brand);
    padding: 10px 16px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .btn:hover {
    background: rgba(59, 130, 246, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
  }
  
  iframe.phone {
    width: 420px;
    height: 900px;
    border: 0;
    border-radius: 20px;
    display: block;
    background: var(--bg);
    margin: 0 auto;
    box-shadow: 0 20px 60px var(--shadow-lg);
    transition: transform 0.3s ease;
  }
  
  iframe.phone:hover {
    transform: scale(1.02);
  }
  
  /* Footer */
  footer {
    margin-top: 40px;
    color: var(--muted);
    text-align: center;
    font-size: 14px;
    padding: 20px 0;
  }
  
  /* Responsive Design */
  @media (max-width: 1024px) {
    .wrap {
      padding: 30px 16px 80px;
    }
    
    header.hero {
      grid-template-columns: 1fr;
      gap: 24px;
      padding: 32px;
    }
    
    .hero h1 {
      font-size: 32px;
    }
    
    .kpis {
      grid-template-columns: repeat(3, 1fr);
    }
    
    .gallery {
      grid-template-columns: repeat(2, 1fr);
    }
    
    iframe.phone {
      width: 380px;
      height: 820px;
    }
  }
  
  @media (max-width: 768px) {
    .hero h1 {
      font-size: 28px;
    }
    
    .hero p {
      font-size: 16px;
    }
    
    .hero-actions {
      flex-direction: column;
      gap: 12px;
    }
    
    .card {
      padding: 24px;
    }
    
    .cols {
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    
    .kpis {
      grid-template-columns: 1fr 1fr;
    }
    
    .gallery {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .results-grid {
      grid-template-columns: 1fr 1fr;
    }
    
    iframe.phone {
      width: 360px;
      height: 780px;
    }
    
    /* 移动端故事内容优化 */
    .story-content {
      padding: 16px;
    }
    
    .requirement-box {
      padding: 16px;
    }
    
    .requirement-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }
    
    .communication-timeline {
      padding-left: 16px;
    }
    
    .timeline-marker {
      left: -24px;
      width: 20px;
      height: 20px;
      font-size: 10px;
    }
    
    .timeline-content {
      padding: 16px;
    }
    
    .tech-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
    
    .key-achievements {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    /* 结果与收获部分响应式优化 */
    .metrics-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
    
    .achievements-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
    
    .future-content {
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
  }
  
  @media (max-width: 640px) {
    .wrap {
      padding: 20px 12px 60px;
    }
    
    header.hero {
      padding: 24px;
    }
    
    .hero h1 {
      font-size: 24px;
    }
    
    .kpis {
      grid-template-columns: 1fr 1fr;
    }
    
    .card {
      padding: 20px;
    }
    
    .cols {
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    .gallery {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .results-grid {
      grid-template-columns: 1fr 1fr;
    }
    
    .tech-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .key-achievements {
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    /* 结果与收获部分响应式优化 */
    .metrics-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .achievements-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .future-content {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    iframe.phone {
      width: 340px;
      height: 720px;
    }
  }
  
  @media (max-width: 480px) {
    .wrap {
      padding: 16px 8px 40px;
    }
    
    header.hero {
      padding: 20px;
    }
    
    .hero h1 {
      font-size: 22px;
    }
    
    .hero p {
      font-size: 14px;
    }
    
    .kpis {
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    .card {
      padding: 16px;
    }
    
    .cols {
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    .gallery {
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .results-grid {
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    .tech-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .key-achievements {
      grid-template-columns: repeat(2, 1fr);
      gap: 6px;
    }
    
    .tech-item {
      padding: 12px;
    }
    
    .tech-item h4 {
      font-size: 14px;
    }
    
    .tech-item p {
      font-size: 12px;
    }
    
    .achievement-item {
      padding: 12px;
    }
    
    .achievement-number {
      font-size: 16px;
    }
    
    .achievement-label {
      font-size: 10px;
    }
    
    /* 结果与收获响应式优化 */
    .metrics-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .metric-card {
      padding: 16px;
    }
    
    .metric-number {
      font-size: 20px;
    }
    
    .metric-label {
      font-size: 14px;
    }
    
    .metric-desc {
      font-size: 12px;
    }
    
    .achievements-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .achievement-card {
      padding: 12px;
    }
    
    .achievement-card h4 {
      font-size: 14px;
    }
    
    .achievement-card li {
      font-size: 12px;
    }
    
    .growth-content {
      gap: 12px;
    }
    
    .growth-item {
      flex-direction: row;
      text-align: left;
      padding: 12px;
    }
    
    .growth-item:hover {
      transform: translateY(-2px);
    }
    
    .growth-icon {
      font-size: 24px;
    }
    
    .growth-text h4 {
      font-size: 14px;
    }
    
    .growth-text p {
      font-size: 12px;
    }
    
    .future-content {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .future-item {
      padding: 12px;
    }
    
    .future-text h4 {
      font-size: 14px;
    }
    
    .future-text p {
      font-size: 12px;
    }
    
    iframe.phone {
      width: 320px;
      height: 680px;
    }
  }
  
  /* 滚动条样式 */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: var(--border-light);
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--brand);
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: var(--brand-light);
  }
  
  /* 动画效果 */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .card {
    animation: fadeInUp 0.6s ease-out;
  }
  
  .card:nth-child(2) { animation-delay: 0.1s; }
  .card:nth-child(3) { animation-delay: 0.2s; }
  .card:nth-child(4) { animation-delay: 0.3s; }
  .card:nth-child(5) { animation-delay: 0.4s; }
</style>
</head>
<body>
    <!-- 返回按钮 -->
    <div class="back-button">
      <a href="https://www.kantrum.cn/education/" class="back-link">
        <span class="back-icon">←</span>
        返回教育页面
      </a>
    </div>

  <div class="wrap">
    <!-- HERO -->
    <header class="hero">
      <div>
        <div class="hero-badge">
          <span class="badge-icon">🚀</span>
          <span class="badge-text">产品案例</span>
        </div>
        <h1>自习室预约小程序<br>从0到1产品案例</h1>
        <p class="muted">把闲置教室转化为对外开放的自习空间：选座 → 预约 → 支付 → 取消/退款 → 门禁联动</p>
        <div class="tags">
          <span class="tag">产品经理</span>
          <span class="tag">一品威客</span>
          <span class="tag">MVP</span>
          <span class="tag">支付回调</span>
          <span class="tag">并发锁</span>
          <span class="tag">物联网门禁</span>
        </div>
        <div class="hero-actions">
          <button class="btn btn-primary" onclick="scrollToDemo()">
            <span class="btn-icon">👀</span>
            查看演示
          </button>
          <button class="btn btn-secondary" onclick="scrollToDetails()">
            <span class="btn-icon">📋</span>
            了解详情
          </button>
        </div>
      </div>
      <div class="kpis">
        <div class="kpi">
          <div class="kpi-icon">📈</div>
          <div class="kpi-label">预约率提升</div>
          <strong>18% → 62%</strong>
        </div>
        <div class="kpi">
          <div class="kpi-icon">💰</div>
          <div class="kpi-label">退款率</div>
          <strong>≈ 5%</strong>
        </div>
        <div class="kpi">
          <div class="kpi-icon">👥</div>
          <div class="kpi-label">一周留存</div>
          <strong>&gt; 50%</strong>
        </div>
      </div>
    </header>

    <!-- 项目背景 -->
    <section class="card" id="project-overview">
      <div class="card-header">
        <h2>项目背景</h2>
        <div class="card-badge">创业故事</div>
      </div>
      
      <!-- 创业背景 -->
      <div class="story-section">
        <h3 class="section-title">🚀 创业起步</h3>
        <div class="story-content">
          <p>我最初成立公司时是以"技术服务公司"的定位起步，主要承接中小型企业和个人客户的软件开发需求。在创业初期，我通过 <strong>一品威客</strong> 平台获取客户资源，其中第一个项目就是一个教育行业客户提出的：开发一款自习室预约小程序。</p>
          <div class="team-info">
            <h4>👥 团队构成</h4>
            <p>当时我们团队一共3个人：我 + 两位计算机专业的同学。我本人并非计算机专业，所以主要负责 <strong>商务沟通、需求澄清与产品设计</strong>；同学则负责技术实现与交付。</p>
          </div>
        </div>
      </div>

      <!-- 客户需求 -->
      <div class="story-section">
        <h3 class="section-title">📋 客户原始需求</h3>
        <div class="requirement-box">
          <div class="requirement-header">
            <h4>项目名称：自习室预约小程序开发</h4>
            <span class="platform-tag">一品威客</span>
          </div>
          <div class="requirement-content">
            <p><strong>需求描述：</strong>我们是一家教育机构，计划把部分闲置教室改造成对外开放的自习室，想要开发一个微信小程序，方便学生进行在线预约和支付。</p>
            <div class="requirement-list">
              <h5>功能需求：</h5>
              <ul>
                <li><strong>学生端：</strong>查看自习室座位情况，支持在线选座、预约、支付（余额支付、微信支付），预约成功后生成订单</li>
                <li><strong>后台端：</strong>管理员可以管理自习室和座位信息，查看每天的预约情况和收入，支持导出报表</li>
                <li><strong>其他：</strong>支持预约取消和退款，具体规则待开发方设计</li>
                <li><strong>界面：</strong>简洁大方，2-3个月内上线试用</li>
          </ul>
        </div>
            <div class="requirement-note">
              <p><em>补充说明：目前我们还没有明确的产品文档，期待开发方能根据经验提出具体的方案。</em></p>
            </div>
          </div>
        </div>
      </div>

      <!-- 沟通历程 -->
      <div class="story-section">
        <h3 class="section-title">💬 三轮沟通历程</h3>
        <div class="communication-timeline">
          <div class="timeline-item">
            <div class="timeline-marker">1</div>
            <div class="timeline-content">
              <h4>第一次沟通：明确目标 & 基础框架</h4>
              <div class="timeline-details">
                <p><strong>讨论要点：</strong></p>
                <ul>
                  <li>客户确认核心目标：把闲置教室改造成自习室，对外收费，学生可以线上预约</li>
                  <li>明确基本功能框架：学生端（查座位→预约→支付→生成订单）+ 管理端（教室/座位管理、订单管理、收入统计）</li>
                  <li>平台选择：初期只做微信小程序，不做APP，降低获客成本</li>
                  <li>交付目标：先上线MVP版本，2-3个月内试点</li>
          </ul>
                <p class="timeline-note"><strong>遗留问题：</strong>取消预约如何处理？退款规则如何定义？座位是自由选还是系统分配？</p>
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-marker">2</div>
            <div class="timeline-content">
              <h4>第二次沟通：细化用户场景 & 异常流程</h4>
              <div class="timeline-details">
                <p><strong>讨论要点：</strong></p>
                <ul>
                  <li><strong>学生端细化：</strong>用户可以按"小时/天/月"预约座位，支持类似"订电影票"的座位图，需要能查看预约记录，支持取消预约</li>
                  <li><strong>机构端需求：</strong>后台需要实时看到当日座位利用率，希望能按日期导出预约报表</li>
                  <li><strong>异常流程补充：</strong>库存冲突、支付失败、超时订单等异常情况的处理</li>
                </ul>
                <p class="timeline-note"><strong>结论：</strong>预约流程需包含正向（预约）+反向（取消）+异常处理三条主线。退款规则待进一步讨论。</p>
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-marker">3</div>
            <div class="timeline-content">
              <h4>第三次沟通：退款规则 & 功能优先级对齐</h4>
              <div class="timeline-details">
                <p><strong>讨论要点：</strong></p>
                <ul>
                  <li><strong>退款规则明确：</strong>开场前1小时取消→全额退款，开场后取消→不退款，支持原路退回（微信/余额）</li>
                  <li><strong>功能优先级划分：</strong>MVP必须（预约→支付→退款/取消→座位管理→报表导出），二期扩展（会员充值、积分兑换、优惠券）</li>
                  <li><strong>产品走查：</strong>用原型图演示学生端流程，客户认可整体方案</li>
                </ul>
                <p class="timeline-note"><strong>最终确定：</strong>范围锁定在预约/取消/退款闭环，2个月内交付可上线的MVP小程序。</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 技术方案 -->
      <div class="story-section">
        <h3 class="section-title">⚙️ 核心技术方案</h3>
        <div class="tech-grid">
          <div class="tech-item">
            <div class="tech-icon">🔒</div>
            <h4>双阶段锁</h4>
            <p>先"预占锁"（30秒）防并发，支付成功后升级为"订单锁"（15分钟），解决并发抢座问题</p>
          </div>
          <div class="tech-item">
            <div class="tech-icon">💰</div>
            <h4>以回调为准</h4>
            <p>用户界面"支付成功"不作准，后端以微信回调为准并做幂等，保证收款准确</p>
          </div>
          <div class="tech-item">
            <div class="tech-icon">🔄</div>
            <h4>幂等校验</h4>
            <p>支付回调可能多次触发，用唯一key去重，防止重复扣费或生成订单</p>
          </div>
          <div class="tech-item">
            <div class="tech-icon">💾</div>
            <h4>Redis + MySQL</h4>
            <p>Redis负责快速读写座位状态，MySQL负责落订单账务，快与稳兼顾</p>
          </div>
          <div class="tech-item">
            <div class="tech-icon">🚪</div>
            <h4>门禁/灯控解耦</h4>
            <p>设备出问题还能兜底，允许人工代开+写审计日志，保证系统可用性</p>
          </div>
          <div class="tech-item">
            <div class="tech-icon">⏰</div>
            <h4>定时任务/补偿</h4>
            <p>系统自动自愈，超时未支付自动关单，退款失败走重试队列</p>
          </div>
        </div>
      </div>

      <!-- 项目成果 -->
      <div class="story-section">
        <h3 class="section-title">🎯 项目成果</h3>
        <div class="results-summary">
          <p>通过三轮沟通，我们从客户最初模糊的"做个自习室小程序"需求，逐步澄清出了核心用户场景、正/反向流程、异常处理逻辑、退款规则与功能优先级。这让整个项目可交付、可落地，也体现了我作为负责人在需求挖掘、方案设计和客户对齐上的价值。</p>
          <div class="key-achievements">
            <div class="achievement-item">
              <span class="achievement-number">18% → 62%</span>
              <span class="achievement-label">预约率提升</span>
            </div>
            <div class="achievement-item">
              <span class="achievement-number">≈ 5%</span>
              <span class="achievement-label">退款率</span>
            </div>
            <div class="achievement-item">
              <span class="achievement-number">> 50%</span>
              <span class="achievement-label">一周留存</span>
            </div>
          </div>
        </div>
      </div>
    </section>

            <!-- 业务流程图 -->
    <section class="card" id="business-flow">
      <div class="card-header">
        <h2>业务流程图</h2>
        <div class="card-badge">流程设计</div>
      </div>
      <p class="muted">展示完整的业务流程设计，包括预约、取消和异常处理流程。</p>
      
      <!-- 流程切换选项 -->
      <div class="flow-tabs">
        <button class="flow-tab active" data-flow="booking" type="button">
          <span class="tab-icon">📅</span>
          <span class="tab-text">预约流程</span>
        </button>
        <button class="flow-tab" data-flow="cancel" type="button">
          <span class="tab-icon">❌</span>
          <span class="tab-text">取消流程</span>
        </button>
        <button class="flow-tab" data-flow="exception" type="button">
          <span class="tab-icon">⚠️</span>
          <span class="tab-text">异常处理</span>
        </button>
      </div>
      
      <!-- 测试按钮 -->
      <div style="margin: 10px 0; text-align: center;">
        <button onclick="switchFlow('booking')" style="margin: 5px; padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer;">测试预约流程</button>
        <button onclick="switchFlow('cancel')" style="margin: 5px; padding: 8px 16px; background: #ef4444; color: white; border: none; border-radius: 8px; cursor: pointer;">测试取消流程</button>
        <button onclick="switchFlow('exception')" style="margin: 5px; padding: 8px 16px; background: #f59e0b; color: white; border: none; border-radius: 8px; cursor: pointer;">测试异常处理</button>
      </div>
      
      <!-- 流程图容器 -->
      <div class="flow-diagram-container">
        <!-- 预约流程图 -->
        <div class="flow-content active" id="booking-flow">
          <h3>预约流程</h3>
          <p class="flow-description">从用户打开小程序到预约成功的完整路径</p>
          <pre class="mermaid">
            flowchart TD
                A["打开小程序"] --> B["选择门店日期时段"]
                B --> C["展示座位图"]
                C --> D["选择座位"]
                D --> E{"座位冲突?"}
                E -->|是| F["提示座位被占用"]
                F --> C
                E -->|否| G["创建草稿订单"]
                G --> H["库存预占"]
                H --> I{"预占成功?"}
                I -->|否| F
                I -->|是| J["返回应付金额与支付方式"]
                J --> K["订单确认页"]
                K --> L{"是否支付?"}
                L -->|否| M["取消并释放预占"]
                M --> C
                L -->|是| N["调起微信支付"]
                N --> O["等待支付回调"]
                O --> P["回调校验与幂等"]
                P --> Q{"校验结果"}
                Q -->|失败或超时| R["释放预占并提示失败"]
                R --> C
                Q -->|通过| S["升级为订单锁"]
                S --> T["落库为已支付"]
                T --> U["展示订单详情与凭证"]
                U --> V["预约成功"]
                
                style A fill:#e1f5fe
                style V fill:#c8e6c9
                style F fill:#ffcdd2
                style R fill:#ffcdd2
          </pre>
        </div>
        
        <!-- 取消流程图 -->
        <div class="flow-content" id="cancel-flow">
          <h3>取消流程</h3>
          <p class="flow-description">展示订单取消的完整流程，包括未支付和已支付订单的不同处理逻辑</p>
          <pre class="mermaid">
          flowchart TD
              A["进入订单详情"] --> B{"订单状态"}
              B -->|未支付| C{"是否超时?"}
              B -->|已支付| D["进入取消页面"]
              
              C -->|未超时| E["取消订单"]
              C -->|已超时| F["释放预占并关闭订单"]
              E --> F
              F --> G["通知用户"]
              G --> H["取消完成"]
              
              D --> I["选择取消原因"]
              I --> J["展示退款规则与说明"]
              J --> K{"确认取消?"}
              K -->|否| L["返回订单详情"]
              K -->|是| M["计算应退金额"]
              M --> N["生成退款单"]
              N --> O["发起原路退款"]
              O --> P{"退款结果"}
              P -->|成功| Q["释放订单锁与恢复座位"]
              P -->|失败| R["记录错误并告警"]
              Q --> S["订单状态更新为已取消或已退款"]
              R --> T["进入重试与补偿队列"]
              S --> U["通知用户金额与到账时间"]
              T --> U
              U --> H
              
              style A fill:#e1f5fe
              style H fill:#c8e6c9
              style L fill:#fff3e0
              style R fill:#ffcdd2
              style T fill:#ffcdd2
          </pre>
        </div>
        
        <!-- 异常处理流程图 -->
        <div class="flow-content" id="exception-flow">
          <h3>异常处理流程</h3>
          <p class="flow-description">展示系统异常情况的处理机制，确保系统稳定性和用户体验</p>
          <pre class="mermaid">
          flowchart TD
              A["系统异常监控"] --> B{"异常类型"}
              
              B -->|网络异常| C["网络重试机制"]
              B -->|支付异常| D["支付回调处理"]
              B -->|库存异常| E["库存同步机制"]
              B -->|门禁异常| F["门禁降级处理"]
              B -->|数据异常| G["数据一致性检查"]
              
              C --> C1["指数退避重试"]
              C1 --> C2{"重试成功?"}
              C2 -->|是| C3["恢复正常流程"]
              C2 -->|否| C4["记录日志并告警"]
              
              D --> D1["支付回调超时"]
              D1 --> D2["主动查询支付状态"]
              D2 --> D3{"支付状态"}
              D3 -->|成功| D4["补发订单成功通知"]
              D3 -->|失败| D5["释放预占并退款"]
              
              E --> E1["Redis与MySQL同步"]
              E1 --> E2["定时任务补偿"]
              E2 --> E3["库存数据校验"]
              
              F --> F1["门禁服务不可用"]
              F1 --> F2["启用备用开门方式"]
              F2 --> F3["人工客服介入"]
              
              G --> G1["数据校验失败"]
              G1 --> G2["回滚事务"]
              G2 --> G3["数据修复"]
              G3 --> G4["重新处理订单"]
              
              C4 --> H["异常汇总"]
              D4 --> H
              D5 --> H
              E3 --> H
              F3 --> H
              G4 --> H
              
              H --> I["监控告警"]
              I --> J["运维处理"]
              J --> K["系统恢复"]
              
              style A fill:#e1f5fe
              style K fill:#c8e6c9
              style C4 fill:#ffcdd2
              style D5 fill:#ffcdd2
              style H fill:#fff3e0
              style I fill:#f3e5f5
          </pre>
        </div>
      </div>
    </section>

    <!-- 泳道图（Mermaid） -->
    <section class="card" id="flow-diagram">
      <div class="card-header">
      <h2>泳道图｜正向预约主链路</h2>
        <div class="card-badge">技术架构</div>
      </div>
      <p class="muted">从登录→选座→预占→支付回调→到店开门；以支付平台 <em>异步回调</em> 为准并做幂等，成功后升级为订单锁。</p>
      <div class="flow-diagram-container">
      <pre class="mermaid">
        sequenceDiagram
            title 自习室预约端到端：预约→支付→到店开门（含异常/补偿）
            autonumber
            participant U as 用户
            participant MP as 小程序
            participant RS as 预约服务(API网关/聚合层)
            participant INV as 库存/排程(Redis+MySQL)
            participant PS as 微信支付
            participant G as 门禁网关
            participant L as 灯控/能耗
        
            %% 0. 登录建联
            U->>MP: 微信授权登录
            MP->>RS: 传 openid/unionid 建会话
            RS-->>MP: 返回会话token/用户态
        
            %% 1. 选座查询
            U->>MP: 选择日期/时段/门店
            MP->>RS: 查询可用座位(参数:门店/时段)
            RS->>INV: 读可用池(Redis ZSET, key=room:slot)
            INV-->>RS: 返回热力/余量/禁用位
            RS-->>MP: 返回座位图(含状态/价格)
        
            %% 2. 下单预占（短TTL防并发）
            U->>MP: 提交订单(座位+时段)
            MP->>RS: 创建订单(草稿)
            par 预占
              RS->>INV: 写预占锁(TTL=30s, 返回token)
              INV-->>RS: 预占OK/冲突
            and 定价
              RS-->>MP: 返回应付金额/支付方式
            end
            alt 预占冲突
              RS-->>MP: 提示“座位被占用”，返回重新选择
              MP-->>U: 引导重新选座
            end
        
            %% 3. 收银（同步反馈 + 以回调为准）
            U->>MP: 确认支付
            MP->>PS: 拉起微信支付(幂等key/签名)
            PS-->>MP: 同步结果(成功/失败/取消)
            note over MP,PS: 以回调为准；同步仅作体验反馈
            PS-->>RS: 异步回调(签名校验, ≤30s, 重试3)
            RS->>RS: 幂等检查(idempotency-key)
        
            alt 回调成功
              RS->>INV: 升级预占→订单锁(TTL=15min)
              RS->>INV: 持久化订单(MySQL: 已支付)
              RS-->>MP: 更新前端状态(已支付)
            else 回调失败/超时
              RS->>INV: 释放预占锁
              RS-->>MP: 标记“支付失败，可重试”
            end
        
            %% 4. 到店开门（时间窗口校验）
            U->>MP: 到店扫码/点“开门”
            MP->>RS: 请求开门(订单号+设备ID)
            RS->>INV: 校验订单(状态/时段/黑白名单)
            INV-->>RS: OK/不可用(过期/未支付)
            alt 校验通过
              RS->>G: 下发开门指令(traceId, TTL=5s)
              G-->>RS: 回执(成功/失败/超时)
              RS-->>MP: 回显开门结果
              par 联动
                RS->>L: 开灯/启动计量
                L-->>RS: 回执(允许超时补偿)
              and 落账
                RS->>INV: 写入进出记录/状态迁移
              end
            else 校验失败
              RS-->>MP: 拒绝开门(原因:时段/状态)
            end
        
            %% 5. 离场与结算
            U->>MP: 点击离场 或 超时触发
            MP->>RS: 完成订单(计费/优惠核销)
            par 能耗
              RS->>L: 关灯/停表
              L-->>RS: 回执(若超时, 后台补偿)
            and 订单
              RS->>INV: 订单完结(已使用/退款中/已取消)
            end
        
            %% 6. 失败兜底（人工/补偿）
            opt 失败兜底
              RS->>G: 前台代开(人工强制, 审计留痕)
              RS->>L: 纠正灯态(补偿命令)
              RS->>INV: 写异常工单/报警
            end
        
            %% 7. 定时任务/补偿
            rect rgb(255,248,230)
              note over RS,INV: 定时任务/补偿
              RS->>INV: 关闭未支付订单(>15min)并释放锁
              RS->>PS: 对账和退款补偿(重试/死信队列)
            end
      </pre>
      </div>
    </section>

    <!-- 原型图画廊 -->
    <section class="card" id="prototypes">
      <div class="card-header">
      <h2>产品原型图</h2>
        <div class="card-badge">UI设计</div>
      </div>
      <p class="muted">完整的产品原型图展示，涵盖从登录到取消预约的全流程界面设计。</p>
      <div class="gallery">
        <figure>
          <img src="../images/Studyroom/studyroom_001.png" alt="登录页">
          <figcaption>登录页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_002.png" alt="首页">
          <figcaption>首页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_003.png" alt="按小时预约页">
          <figcaption>按小时预约页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_004.png" alt="按天预约页">
          <figcaption>按天预约页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_005.png" alt="按月预约页">
          <figcaption>按月预约页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_006.png" alt="订单确认页">
          <figcaption>订单确认页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_007.png" alt="支付成功页">
          <figcaption>支付成功页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_008.png" alt="我的订单列表">
          <figcaption>我的订单列表</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_009.png" alt="开门成功页">
          <figcaption>开门成功页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_010.png" alt="取消预约页">
          <figcaption>取消预约页</figcaption>
        </figure>
        <figure>
          <img src="../images/Studyroom/studyroom_011.png" alt="取消预约成功">
          <figcaption>取消预约成功</figcaption>
        </figure>
      </div>
    </section>

    <!-- 交互前端设计模拟（你的代码已被嵌入 iframe 中，隔离样式与脚本） -->
    <section class="card" id="demo">
      <div class="card-header">
      <h2>交互前端设计模拟（可点全屏体验）</h2>
        <div class="card-badge">在线演示</div>
      </div>
      <div class="demo-shell" id="demoShell">
        <div class="demo-head">
          <div class="demo-title">专注空间 - 交互演示</div>
          <div class="demo-actions">
            <button class="btn" id="reloadBtn">🔄 重载</button>
            <button class="btn" id="openBtn">🔗 新窗口打开</button>
          </div>
        </div>
        <iframe class="phone" id="phoneFrame" title="交互原型预览" loading="lazy" src="https://www.kantrum.cn/academic/app_01"></iframe>
      </div>
      <p class="muted">说明：演示链接指向 <a href="https://www.kantrum.cn/academic/app_01" target="_blank">https://www.kantrum.cn/academic/app_01</a>，展示完整的自习室预约小程序交互流程。</p>
    </section>

    <!-- 总结 -->
    <section class="card" id="results">
      <div class="card-header">
        <h2>结果与收获</h2>
        <div class="card-badge">项目成果</div>
      </div>
      
      <!-- 核心数据指标 -->
      <div class="metrics-section">
        <h3 class="metrics-title">📊 核心数据指标</h3>
        <div class="metrics-grid">
          <div class="metric-card primary">
            <div class="metric-icon">📈</div>
            <div class="metric-content">
              <div class="metric-number">18% → 62%</div>
              <div class="metric-label">预约率提升</div>
              <div class="metric-desc">从传统线下预约到线上智能化预约</div>
            </div>
          </div>
          <div class="metric-card success">
            <div class="metric-icon">💰</div>
            <div class="metric-content">
              <div class="metric-number">≈ 5%</div>
              <div class="metric-label">退款率控制</div>
              <div class="metric-desc">合理的退款规则设计，用户满意度高</div>
            </div>
          </div>
          <div class="metric-card info">
            <div class="metric-icon">👥</div>
            <div class="metric-content">
              <div class="metric-number">> 50%</div>
              <div class="metric-label">一周留存率</div>
              <div class="metric-desc">用户粘性强，产品价值得到验证</div>
            </div>
          </div>
          <div class="metric-card warning">
            <div class="metric-icon">⏱️</div>
            <div class="metric-content">
              <div class="metric-number">2个月</div>
              <div class="metric-label">交付周期</div>
              <div class="metric-desc">从需求到上线，快速响应客户需求</div>
            </div>
          </div>
        </div>
      </div>

      <!-- 项目成果 -->
      <div class="achievements-section">
        <h3 class="achievements-title">🏆 项目成果</h3>
        <div class="achievements-grid">
          <div class="achievement-card">
            <div class="achievement-icon">🎯</div>
            <h4>产品成功上线</h4>
            <ul>
              <li>MVP版本2个月内成功交付</li>
              <li>完整预约-支付-取消-退款闭环</li>
              <li>异常处理机制完善，系统稳定运行</li>
              <li>客户满意度高，获得续约机会</li>
            </ul>
          </div>
          <div class="achievement-card">
            <div class="achievement-icon">🔧</div>
            <h4>技术能力提升</h4>
            <ul>
              <li>掌握产品需求分析方法论</li>
              <li>学会与研发团队高效协作</li>
              <li>理解技术实现原理和约束</li>
              <li>建立异常处理思维模式</li>
            </ul>
          </div>
          <div class="achievement-card">
            <div class="achievement-icon">💡</div>
            <h4>产品思维建立</h4>
            <ul>
              <li>从模糊需求到清晰方案的转化能力</li>
              <li>用户体验与商业价值的平衡</li>
              <li>数据驱动的产品优化思路</li>
              <li>低成本高体验的功能设计理念</li>
            </ul>
          </div>
          <div class="achievement-card">
            <div class="achievement-icon">🤝</div>
            <h4>团队协作经验</h4>
            <ul>
              <li>跨部门沟通协调能力</li>
              <li>客户需求澄清和方案对齐</li>
              <li>项目进度管理和风险控制</li>
              <li>测试验收和问题解决</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 个人成长 -->
      <div class="growth-section">
        <h3 class="growth-title">🌱 个人成长收获</h3>
        <div class="growth-content">
          <div class="growth-item">
            <div class="growth-icon">📚</div>
            <div class="growth-text">
              <h4>从0到1的产品经理</h4>
              <p>作为非技术背景的创业者，通过这个项目快速掌握了产品经理的核心技能：需求分析、原型设计、流程梳理、团队协作。从"完全不懂"到"能讲清楚"，实现了质的飞跃。</p>
            </div>
          </div>
          <div class="growth-item">
            <div class="growth-icon">🎨</div>
            <div class="growth-text">
              <h4>用户体验设计思维</h4>
              <p>学会了站在用户角度思考问题，设计出"最近一次选择记忆"这样的低成本高体验功能。理解了什么是真正的用户价值，以及如何平衡功能复杂度和用户体验。</p>
            </div>
          </div>
          <div class="growth-item">
            <div class="growth-icon">⚡</div>
            <div class="growth-text">
              <h4>快速学习能力</h4>
              <p>在项目过程中快速学习了Redis、MySQL、支付系统、异常处理等技术概念，虽然不直接编程，但能够理解技术实现逻辑，与研发团队进行有效沟通。</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 后续规划 -->
      <div class="future-section">
        <h3 class="future-title">🚀 后续规划与展望</h3>
        <div class="future-content">
          <div class="future-item">
            <div class="future-icon">📱</div>
            <div class="future-text">
              <h4>产品迭代优化</h4>
              <p>基于用户反馈持续优化产品体验，计划增加智能推荐、会员体系、数据分析等高级功能，打造更完善的自习室管理生态。</p>
            </div>
          </div>
          <div class="future-item">
            <div class="future-icon">🌐</div>
            <div class="future-text">
              <h4>业务模式拓展</h4>
              <p>将成功经验复制到其他教育场景，如会议室预约、实验室管理、图书馆座位等，形成标准化的SaaS解决方案。</p>
            </div>
          </div>
          <div class="future-item">
            <div class="future-icon">👥</div>
            <div class="future-text">
              <h4>团队能力建设</h4>
              <p>建立更完善的产品开发流程，培养更多优秀的产品经理和技术人才，打造专业的教育科技服务团队。</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      © Kantrum — 自习室预约小程序案例
    </footer>
  </div>

  <!-- 平滑滚动和交互功能 -->
  <script>
    // 平滑滚动到指定元素
    function scrollToElement(elementId) {
      const element = document.getElementById(elementId);
      if (element) {
        element.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        });
      }
    }
    
    // 滚动到演示区域
    function scrollToDemo() {
      scrollToElement('demo');
    }
    
    // 滚动到详情区域
    function scrollToDetails() {
      scrollToElement('project-overview');
    }
    
    // 切换流程图 - 全局函数
    function switchFlow(flowType) {
      console.log('切换流程:', flowType);
      
      // 移除所有标签的active状态
      const allTabs = document.querySelectorAll('.flow-tab');
      allTabs.forEach(tab => {
        tab.classList.remove('active');
      });
      
      // 隐藏所有流程内容
      const allContents = document.querySelectorAll('.flow-content');
      allContents.forEach(content => {
        content.classList.remove('active');
        content.style.display = 'none';
      });
      
      // 激活选中的标签
      const activeTab = document.querySelector(`[data-flow="${flowType}"]`);
      if (activeTab) {
        activeTab.classList.add('active');
        console.log('激活标签:', activeTab);
      } else {
        console.error('未找到标签:', flowType);
        return;
      }
      
      // 显示对应的流程内容
      const activeContent = document.getElementById(`${flowType}-flow`);
      if (activeContent) {
        activeContent.classList.add('active');
        activeContent.style.display = 'block';
        console.log('显示内容:', activeContent.id);
      } else {
        console.error('未找到内容元素:', `${flowType}-flow`);
      }
    }
    
    // 页面加载完成后的初始化
    document.addEventListener('DOMContentLoaded', function() {
      // 添加流程切换按钮事件监听器
      const flowTabs = document.querySelectorAll('.flow-tab');
      console.log('找到流程标签数量:', flowTabs.length);
      
      flowTabs.forEach((tab, index) => {
        console.log(`标签 ${index}:`, tab.getAttribute('data-flow'));
        tab.addEventListener('click', function(e) {
          e.preventDefault();
          const flowType = this.getAttribute('data-flow');
          console.log('点击切换:', flowType);
          switchFlow(flowType);
        });
      });
      
      // 添加滚动时的视差效果
      window.addEventListener('scroll', function() {
        const scrolled = window.pageYOffset;
        const parallax = document.querySelector('.wrap::before');
        if (parallax) {
          parallax.style.transform = `translateY(${scrolled * 0.5}px)`;
        }
      });
      
      // 添加卡片进入视口时的动画
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, observerOptions);
      
      // 观察所有卡片
      document.querySelectorAll('.card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
      });
});
</script>

    <!-- Demo 控件 -->
  <script>
    const frame = document.getElementById('phoneFrame');
    document.getElementById('reloadBtn').addEventListener('click',()=>{ frame.src = frame.src; });
    document.getElementById('openBtn').addEventListener('click',()=>{ window.open('https://www.kantrum.cn/academic/app_01','_blank'); });
  </script>
</body>
</html>
